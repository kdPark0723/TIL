# Revenge of the ants 1

| 시간 제한 | 메모리 제한 | 제출 | 정답 | 맞은 사람 | 정답 비율 |
| :-------- | :---------- | :--- | :--- | :-------- | :-------- |
| 5 초      | 256 MB      | 153  | 20   | 15        | 24.590%   |

## 문제

둘레의 길이가 L인 원형 레일이 있다. 경근이는 레일을 L등분하여 각 지점에 시계방향으로 0에서 L−1까지의 번호를 붙였다. 그리고 번호를 붙인 지점 중 몇 개를 선택하여 시계방향으로 레일 위를 움직이는 개미 N마리와 반시계방향으로 레일 위를 움직이는 개미 M마리를 놓았다. 이때 같은 지점에 두 마리 이상의 개미가 있는 경우는 없다.

레일 위에 올라온 모든 개미는 1초에 1의 거리를 움직인다. 레일의 폭은 최대 한 마리의 개미만이 움직일 수 있을 정도로 매우 좁아서, 서로 반대방향으로 움직이는 개미들이 어느 한 위치에서 부딪치고 난 다음에는 그 즉시 서로 방향을 반대로 바꾸어 움직인다. 개미의 크기는 매우 작아서 점으로 취급하여, 정확히 같은 위치에 존재하게 되어야 부딪친다고 하자.

경근이는 모든 개미를 구별할 수 있어서, 모든 개미가 처음과 같은 위치에서 같은 속도를 가지게 되려면 최소한 몇 초가 필요한지 궁금해졌다. 경근이를 도와 이 시간이 몇 초인지 알려주는 프로그램을 작성하라.

## 입력

첫 번째 줄에 원형 레일의 둘레를 의미하는 L, 시계방향으로 레일 위를 움직이는 개미의 수를 의미하는 N, 반 시계방향으로 레일 위를 움직이는 개미의 수를 의미하는 M이 공백으로 구분되어 주어진다.

두 번째 줄에는 시계방향으로 움직이는 개미들이 있는 지점을 의미하는 N개의 정수가 공백으로 구분되어 주어진다.

세 번째 줄에는 반시계방향으로 움직이는 개미들이 있는 지점을 의미하는 M개의 정수가 공백으로 구분되어 주어진다.

이 문제는 두 개의 부분 문제로 이루어져 있다.

[1번 문제](https://www.acmicpc.net/problem/10720)의 입력은 1≤L≤600, 1≤N,M,N+M≤600을 만족하며 해결하면 20점을 얻을 수 있다.

[2번 문제](https://www.acmicpc.net/problem/10721)의 입력은 1≤L≤10^12, 1≤N,M,N+M≤10^6을 만족하며 해결하면 80점을 얻을 수 있다.

## 출력

첫 번째 줄에 모든 개미들이 처음과 같은 위치, 같은 속도를 가지게 되려면 최소한 몇 초가 필요한지 출력하라.



## 예제 입력 1 복사

```
2 1 1
0
1
```

## 예제 출력 1 복사

```
2
```

## 힌트

0.5초와 1.5초에 부딪친 후 2초가 되면 처음과 같은 상태가 된다.

## 출처

<https://www.acmicpc.net/problem/10720>



## 풀이 

### 2차 시도

 기존의 모든 위치에 대한 배열 만드는 대신 cw, ccw 개미들을 원형 링크드 리스트 형태로 구현한다. 그리고 1차 시도와 마찬가지로 각각의 링크드 리스트는 자신의 시작 인덱스 주소를 가지고 있다. 각 링크드 리스트를 초기화 한후. 각 cw 개미가 시계방향으로 순회 할때 처음 만나는 ccw 개미와의 거리를 구하여 새로운 링크드 리스트에 넣는다 이때 링크드 리스트에 들어 가는 정보는 cw, ccw 개미 사이의 거리와 cw, ccw개미를 가르키는 포인터이다. 링크트 리스트에 데이터를 넣을땐 거리를 기준으로 오름차순으로 정렬 한다. 그리고 이 링크드 리스트는 현재 처리해야 하는 데이터를 가르키는 포인터, 총 처리된 시간을 가지고 있다. 이제 n초 후에 개미의 위치를 구하고 충돌을 처리 하기 위해선 가장 작은 길이를 가지는 데이터 부터 순회하며 그 데이터의 길이만큼 이동한 시간을 더하고, 그 데이터가 가르키고 있는 개미들의 이름 정보를 바꾸기만 하면 된다. 따라서 다음 개미들의 충돌 까지 처리하는데 걸리는 시간은 처음 데이터들을 생성하는 데 걸리는 시간, O(N + M)을 뺀다면 O(1)이 된다. 이제 바뀐 개미들이 원래 정보와 같은지 찾기 위해 링크드 리스트의 개미 정보들을 순회하면 그때 걸리는 시간은 O(N+M) 이 된다. 따라서 K번 충돌후 개미가 원래 개미가 되는지 알기 위한 시간은 O(K(N+M))이다. K는 (N+M)보다 최악일 경우에 클 수 있으므로 이 방법은 시간 초과가 일어날 것이다.
